# Wolf configuration
# Reference: https://games-on-whales.github.io/wolf/stable/
apiVersion: v1
kind: ConfigMap
metadata:
  name: wolf-config
  namespace: wolf
data:
  # Wolf will auto-generate config.toml on first run
  # These are environment overrides
  WOLF_LOG_LEVEL: "INFO"
  # Tailscale IP for streaming (fixes MAC address resolution)
  WOLF_INTERNAL_IP: "100.67.125.109"
  # Dummy MAC for Tailscale (virtual interface has no MAC)
  WOLF_INTERNAL_MAC: "00:00:00:00:00:01"
  # EGL/OpenGL configuration for NVIDIA (required for virtual compositor)
  __EGL_VENDOR_LIBRARY_DIRS: "/run/opengl-driver/share/glvnd/egl_vendor.d"
  __EGL_EXTERNAL_PLATFORM_CONFIG_DIRS: "/run/opengl-driver/share/egl/egl_external_platform.d"
  # GBM backend for NVIDIA buffer allocation
  GBM_BACKENDS_PATH: "/run/opengl-driver/lib/gbm"
  # Use manual nvidia driver volume instead of nvidia runtime (DinD doesn't have nvidia runtime)
  NVIDIA_DRIVER_VOLUME_NAME: "nvidia-driver-vol"
  # XDG_RUNTIME_DIR where Wayland sockets live - must be accessible to spawned containers
  # Using /mnt/wolf-sockets to avoid any /tmp overlay conflicts
  XDG_RUNTIME_DIR: "/mnt/wolf-sockets"
  # Streaming ports (must match service definitions)
  WOLF_HTTP_PORT: "47989"
  WOLF_HTTPS_PORT: "47984"
  WOLF_CONTROL_PORT: "47999"
  WOLF_RTSP_SETUP_PORT: "48010"
  WOLF_VIDEO_PING_PORT: "48100"
  WOLF_AUDIO_PING_PORT: "48200"
